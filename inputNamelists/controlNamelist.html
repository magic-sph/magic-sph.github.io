
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Control namelist &#8212; Magic 6.0 documentation</title>
    <link rel="stylesheet" href="../_static/magic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Magic 6.0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Physical parameters namelist" href="physNamelist.html" />
    <link rel="prev" title="Grid namelist" href="gridNamelist.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
    <script src="galleria/galleria-1.4.2.min.js"></script>
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
  </style>
  <script type="text/javascript">
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../install.html">Get it/Run it</a></li>
    <li><a href="../contribute.html">Contribute!</a></li>
    <li><a href="../numerics.html">Numerical methods</a></li>
    <li><a href="../contents.html">Contents</a></li>
  </ul>
  <div>
    <a href="../index.html">
      <img src="../_static/logo.png" alt="magic" height="120px" width="192px"/>
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../f-modindex.html" title="Fortran Module Index"
             >fortran modules</a> |</li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="physNamelist.html" title="Physical parameters namelist"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gridNamelist.html" title="Grid namelist"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">Magic 6.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="namelists.html" accesskey="U">Input parameters</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="control-namelist">
<span id="seccontrolnml"></span><h1>Control namelist<a class="headerlink" href="#control-namelist" title="Permalink to this headline">¶</a></h1>
<p>This namelist defines the numerical parameters of the problem plus the
variables that control and organize the run.</p>
<ul id="varmode">
<li><p class="first"><strong>mode</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/physical_parameters/mode" title="f/physical_parameters/mode"><code class="xref f f-var docutils literal notranslate"><span class="pre">mode=0</span></code></a>) is an integer which controls the type of calculation performed.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>mode=0</td>
<td>Self-consistent dynamo</td>
</tr>
<tr class="row-even"><td>mode=1</td>
<td>Convection</td>
</tr>
<tr class="row-odd"><td>mode=2</td>
<td>Kinematic dynamo</td>
</tr>
<tr class="row-even"><td>mode=3</td>
<td>Magnetic decay modes</td>
</tr>
<tr class="row-odd"><td>mode=4</td>
<td>Magneto convection</td>
</tr>
<tr class="row-even"><td>mode=5</td>
<td>Linear onset of convection</td>
</tr>
<tr class="row-odd"><td>mode=6</td>
<td>Self-consistent dynamo, but with no Lorentz force</td>
</tr>
<tr class="row-even"><td>mode=7</td>
<td>Super-rotating inner core or mantle, no convection and
no magnetic field</td>
</tr>
<tr class="row-odd"><td>mode=8</td>
<td>Super-rotating inner core or mantle, no convection</td>
</tr>
<tr class="row-even"><td>mode=9</td>
<td>Super-rotating inner core or mantle, no convection
and no Lorentz force</td>
</tr>
<tr class="row-odd"><td>mode=10</td>
<td>Super-rotating inner core or mantle, no convection,
no magnetic field, no Lorentz force and no advection</td>
</tr>
</tbody>
</table>
</li>
</ul>
<ul class="simple" id="vartag">
<li><strong>tag</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/output_data/tag" title="f/output_data/tag"><code class="xref f f-var docutils literal notranslate"><span class="pre">tag=&quot;default&quot;</span></code></a>) is a character string, used as an extension for all output files.</li>
<li><strong>n_time_steps</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/n_time_steps" title="f/num_param/n_time_steps"><code class="xref f f-var docutils literal notranslate"><span class="pre">n_time_steps=100</span></code></a>) is an integer, the number of time steps to be performed.</li>
<li><strong>tEND</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/tend" title="f/num_param/tend"><code class="xref f f-var docutils literal notranslate"><span class="pre">tEND=0.0</span></code></a>) is a real, which can be used to force the code to stop when :math:<code class="docutils literal notranslate"><span class="pre">t=tEND</span></code>. This is only used when <code class="docutils literal notranslate"><span class="pre">t/=tEND</span></code>.</li>
<li><strong>alpha</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/alpha" title="f/num_param/alpha"><code class="xref f f-var docutils literal notranslate"><span class="pre">alpha=0.5</span></code></a>) is a real. This is the weight used for current time step in implicit time step.</li>
</ul>
<div class="section" id="default-scales">
<h2>Default scales<a class="headerlink" href="#default-scales" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><strong>n_tScale</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/n_tscale" title="f/num_param/n_tscale"><code class="xref f f-var docutils literal notranslate"><span class="pre">n_tScale=0</span></code></a>) is an integer, which determines the time scaling</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="45%" />
<col width="34%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>n_tScale=0</td>
<td>Use viscous time scale.</td>
<td><span class="math notranslate nohighlight">\(d^2/\nu\)</span></td>
</tr>
<tr class="row-even"><td>n_tScale=1</td>
<td>Use magnetic time scale.</td>
<td><span class="math notranslate nohighlight">\(d^2/\eta\)</span></td>
</tr>
<tr class="row-odd"><td>n_tScale=2</td>
<td>Use thermal time scale.</td>
<td><span class="math notranslate nohighlight">\(d^2/\kappa\)</span></td>
</tr>
<tr class="row-even"><td>n_tScale=3</td>
<td>Use rotational time scale.</td>
<td><span class="math notranslate nohighlight">\(\Omega^{-1}\)</span></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><strong>n_lScale</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/n_lscale" title="f/num_param/n_lscale"><code class="xref f f-var docutils literal notranslate"><span class="pre">n_lScale=0</span></code></a>) is an integer which determines the reference length scale.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>n_lScale=0</td>
<td>Use outer core.</td>
</tr>
<tr class="row-even"><td>n_lScale=1</td>
<td>Use total core.</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><strong>enscale</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/enscale" title="f/num_param/enscale"><code class="xref f f-var docutils literal notranslate"><span class="pre">enscale=1.0</span></code></a>) is a real. This is the scaling for energies.</p>
</li>
</ul>
</div>
<div class="section" id="update-control">
<h2>Update control<a class="headerlink" href="#update-control" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>l_update_v</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_update_v" title="f/logic/l_update_v"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_update_v=.true.</span></code></a>) is a logical that specifies whether the velocity field should be time-stepped or not.</li>
<li><strong>l_update_b</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_update_b" title="f/logic/l_update_b"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_update_b=.true.</span></code></a>) is a logical that specifies whether the magnetic field should be time-stepped or not.</li>
<li><strong>l_update_s</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_update_s" title="f/logic/l_update_s"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_update_s=.true.</span></code></a>) is a logical that specifies whether the entropy/temperature should be time-stepped or not.</li>
<li><strong>l_update_xi</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_update_xi" title="f/logic/l_update_xi"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_update_xi=.true.</span></code></a>) is a logical that specifies whether the chemical composition should be time-stepped or not.</li>
</ul>
</div>
<div class="section" id="time-step-control">
<h2>Time step control<a class="headerlink" href="#time-step-control" title="Permalink to this headline">¶</a></h2>
<p>A modified Courant criterion including a modified Alfven-velocity is used to
account for the magnetic field. The relative and absolute importance of flow
and Alfven-velocity can be controled by <strong>courfac</strong> and <strong>alffac</strong> respectively.
The parameter <strong>l_cour_alf_damp</strong> allows to choose whether the actual Alven speed
is used to estimate the Courant condition or if damping is included. Practically,
the timestep size is controlled as follows</p>
<div class="math notranslate nohighlight">
\[\delta t &lt; \min_{V}\left( c_I\,E,\, \dfrac{\delta r}{|u_r|},\, \dfrac{\delta h}{u_h} \right)\]</div>
<p>where <span class="math notranslate nohighlight">\(u_h=(u_\theta^2+u_\phi^2)^{1/2}\)</span>, <span class="math notranslate nohighlight">\(\delta h = \dfrac{r}{\sqrt{\ell(\ell+1)}}\)</span>, and <span class="math notranslate nohighlight">\(\delta r\)</span> is the radial grid interval. The first term in the left hand side accounts for the explicit treatment of the Coriolis term.</p>
<div class="math notranslate nohighlight">
\[{|u_r|}=c_F{|u_{F,r}|}+c_A\dfrac{u_{A,r}^2}{\left[u_{A,r}^2+\left(\frac{1+Pm^{-1}}{2\delta r}\right)^2\right]^{1/2}}\,,\]</div>
<p>where <span class="math notranslate nohighlight">\(u_{F,r}\)</span> is the radial component of the fluid velocity and <span class="math notranslate nohighlight">\(u_{A,r}=Br/\sqrt{E\,Pm}\)</span> is the radial Alven velocity. The denominator of the rightmost term accounts for the damping of the Alven waves.</p>
<ul>
<li><p class="first"><strong>dtMax</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/dtmax" title="f/num_param/dtmax"><code class="xref f f-var docutils literal notranslate"><span class="pre">dtMax=1e-4</span></code></a>) is a  real. This is the maximum allowed time step <span class="math notranslate nohighlight">\(\delta t\)</span>. If <span class="math notranslate nohighlight">\(\delta t &gt; \hbox{dtmax}\)</span>, the time step is decreased to at least dtMax (See routine <cite>dt_courant</cite>). Run is stopped if <span class="math notranslate nohighlight">\(\delta t &lt; \hbox{dtmin}\)</span> and <span class="math notranslate nohighlight">\(\hbox{dtmin}=10^{-6}\,\hbox{dtmax}\)</span>.</p>
</li>
<li><p class="first"><strong>courfac</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/courfac" title="f/num_param/courfac"><code class="xref f f-var docutils literal notranslate"><span class="pre">courfac=2.5</span></code></a>) is a real used to scale velocity in Courant criteria. This parameter corresponds to <span class="math notranslate nohighlight">\(c_F\)</span> in the above equation.</p>
</li>
<li><p class="first"><strong>alffac</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/alffac" title="f/num_param/alffac"><code class="xref f f-var docutils literal notranslate"><span class="pre">alffac=1.0</span></code></a>) is a  real, used to scale Alfven-velocity in Courant criteria. This parameter corresponds to <span class="math notranslate nohighlight">\(c_A\)</span> in the above equation.</p>
</li>
<li><p class="first"><strong>intfac</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/intfac" title="f/num_param/intfac"><code class="xref f f-var docutils literal notranslate"><span class="pre">intfac=0.15</span></code></a>) is a  real, used to scale Coriolis factor in Courant criteria. This parameter corresponds to <span class="math notranslate nohighlight">\(c_I\)</span> in the above equation.</p>
</li>
<li><p class="first"><strong>l_cour_alf_damp</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_cour_alf_damp" title="f/logic/l_cour_alf_damp"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_cour_alf_damp=.true.</span></code></a>) is a logical. This is used to decide whether the damping of the Alven waves is taken into account when estimating the Courant condition (see Christensen et al., GJI, 1999). At low Ekman numbers, this criterion might actually lead to spurious oscillations/instabilities of the code. When turn to False, <span class="math notranslate nohighlight">\({|u_r|}=c_F{|u_{F,r}|}+c_A{|u_{A,r}|}\)</span>.</p>
</li>
<li><p class="first"><strong>time_scheme</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/time_scheme" title="f/num_param/time_scheme"><code class="xref f f-var docutils literal notranslate"><span class="pre">time_scheme='CNAB2'</span></code></a>) is a character string. This is used to choose the time step integrator used in the code among the following implicit-explicit time schemes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>time_scheme=’CNAB2’</td>
<td>Crank-Nicolson and 2nd order Adams-Bashforth scheme</td>
</tr>
<tr class="row-even"><td>time_scheme=’CNLF’</td>
<td>Crank-Nicolson and Leap-Frog scheme</td>
</tr>
<tr class="row-odd"><td>time_scheme=’MODCNAB’</td>
<td>Modified CN/AB2</td>
</tr>
<tr class="row-even"><td>time_scheme=’SBDF2’</td>
<td>Semi-implicit backward difference scheme of 2nd order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’SBDF3’</td>
<td>Semi-implicit backward difference scheme of 3rd order</td>
</tr>
<tr class="row-even"><td>time_scheme=’SBDF4’</td>
<td>Semi-implicit backward difference scheme of 4th order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’ARS222’</td>
<td>Semi-implicit S-DIRK of 2nd order</td>
</tr>
<tr class="row-even"><td>time_scheme=’ARS232’</td>
<td>Semi-implicit S-DIRK of 2nd order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’CK232’</td>
<td>Semi-implicit S-DIRK of 2nd order</td>
</tr>
<tr class="row-even"><td>time_scheme=’LZ232’</td>
<td>Semi-implicit S-DIRK of 2nd order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’CB3’</td>
<td>Semi-implicit S-DIRK of 3rd order</td>
</tr>
<tr class="row-even"><td>time_scheme=’ARS343’</td>
<td>Semi-implicit S-DIRK of 3rd order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’ARS443’</td>
<td>Semi-implicit S-DIRK of 3rd order</td>
</tr>
<tr class="row-even"><td>time_scheme=’BPR353’</td>
<td>Semi-implicit S-DIRK of 3rd order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’LZ453’</td>
<td>Semi-implicit S-DIRK of 3rd order</td>
</tr>
<tr class="row-even"><td>time_scheme=’KC343’</td>
<td>Semi-implicit S-DIRK of 3rd order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’KC564’</td>
<td>Semi-implicit S-DIRK of 4th order</td>
</tr>
<tr class="row-even"><td>time_scheme=’KC674’</td>
<td>Semi-implicit S-DIRK of 4th order</td>
</tr>
<tr class="row-odd"><td>time_scheme=’KC785’</td>
<td>Semi-implicit S-DIRK of 5th order</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section" id="run-time">
<h2>Run time<a class="headerlink" href="#run-time" title="Permalink to this headline">¶</a></h2>
<p>The total desired runtime (in human units and not in CPU units) can be specified with the three variables <strong>runHours</strong>, <strong>runMinutes</strong> and <strong>runSeconds</strong>.</p>
<ul class="simple">
<li><strong>runHours</strong> (default <a class="reference internal" href="../apiFortran/initModules.html#f/namelists/runhours" title="f/namelists/runhours"><code class="xref f f-var docutils literal notranslate"><span class="pre">runHours=0</span></code></a>) is an integer that controls the number of run hours.</li>
<li><strong>runMinutes</strong> (default <a class="reference internal" href="../apiFortran/initModules.html#f/namelists/runminutes" title="f/namelists/runminutes"><code class="xref f f-var docutils literal notranslate"><span class="pre">runMinutes=0</span></code></a>) is an integer that controls the .</li>
<li><strong>runSeconds</strong> (default <a class="reference internal" href="../apiFortran/initModules.html#f/namelists/runseconds" title="f/namelists/runseconds"><code class="xref f f-var docutils literal notranslate"><span class="pre">runSeconds=0</span></code></a>) is an integer that controls the number of run hours.</li>
</ul>
<p>Here is an example for a run of 23h30:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">runHours</span>   <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
<span class="n">runMinutes</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="hyperdiffusivity">
<h2>Hyperdiffusivity<a class="headerlink" href="#hyperdiffusivity" title="Permalink to this headline">¶</a></h2>
<p>Hyperdiffusion can be applied by multiplying the diffusion operators by a factor of the form</p>
<div class="math notranslate nohighlight">
\[d(\ell)=1+D\left[\frac{\ell+1-\ell_{hd}}{\ell_{max}+1-\ell_{hd}} \right]^{\beta}\]</div>
<p>for the spherical harmonic degrees <span class="math notranslate nohighlight">\(\ell \geq \ell_{hd}\)</span>.</p>
<ul class="simple">
<li><strong>difnu</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/difnu" title="f/num_param/difnu"><code class="xref f f-var docutils literal notranslate"><span class="pre">difnu=0.0</span></code></a>) is a real. This is the amplitude <span class="math notranslate nohighlight">\(D\)</span> of the viscous hyperdiffusion.</li>
<li><strong>difkappa</strong> (default <code class="xref f f-var docutils literal notranslate"><span class="pre">difkappa=0.0</span></code>) is a real. This is the amplitude <span class="math notranslate nohighlight">\(D\)</span> of the thermal hyperdiffusion.</li>
<li><strong>difchem</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/difchem" title="f/num_param/difchem"><code class="xref f f-var docutils literal notranslate"><span class="pre">difchem=0.0</span></code></a>) is a real. This is the amplitude <span class="math notranslate nohighlight">\(D\)</span> of the hyperdiffusion applied to chemical composition.</li>
<li><strong>difeta</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/difeta" title="f/num_param/difeta"><code class="xref f f-var docutils literal notranslate"><span class="pre">difeta=0.0</span></code></a>) is a real. This is the amplitude <span class="math notranslate nohighlight">\(D\)</span> of the magnetic hyperdiffusion.</li>
<li><strong>ldif</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/ldif" title="f/num_param/ldif"><code class="xref f f-var docutils literal notranslate"><span class="pre">ldif=1</span></code></a>) is an integer. This is the degree <span class="math notranslate nohighlight">\(\ell_{hd}\)</span> where hyperdiffusion starts to act.</li>
<li><strong>ldifexp</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/ldifexp" title="f/num_param/ldifexp"><code class="xref f f-var docutils literal notranslate"><span class="pre">ldifexp=-1</span></code></a>) is an integer. This is the exponent <span class="math notranslate nohighlight">\(\beta\)</span> of hyperdiffusion.</li>
</ul>
</div>
<div class="section" id="angular-momentum-correction">
<h2>Angular momentum correction<a class="headerlink" href="#angular-momentum-correction" title="Permalink to this headline">¶</a></h2>
<p>In case of the use of stress-free boundary conditions at both boundaries, it is safer to ensure
that the angular momentum is correctly conserved. This can be enforced through the following
input variables:</p>
<ul class="simple">
<li><strong>l_correct_AMe</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_correct_ame" title="f/logic/l_correct_ame"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_correct_AMe=.false.</span></code></a>) is a logical. This is used to correct the equatorial angular momentum.</li>
<li><strong>l_correct_AMz</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_correct_amz" title="f/logic/l_correct_amz"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_correct_AMz=.false.</span></code></a>) is a logical. This is used to correct the axial angular momentum.</li>
</ul>
</div>
<div class="section" id="radial-scheme-and-mapping-of-the-gauss-lobatto-grid">
<span id="varl-newmap"></span><h2>Radial scheme and mapping of the Gauss-Lobatto grid<a class="headerlink" href="#radial-scheme-and-mapping-of-the-gauss-lobatto-grid" title="Permalink to this headline">¶</a></h2>
<p>In MagIC, one can either use finite differences or Chebyshev polynomials for the radial integration scheme. This choice is controlled by the following input parameter:</p>
<ul>
<li><p class="first"><strong>radial_scheme</strong> (default <a class="reference internal" href="../apiFortran/legFourierChebAlgebra.html#f/radial_scheme" title="f/radial_scheme: This is an abstract type that defines the radial scheme used in MagIC"><code class="xref f f-var docutils literal notranslate"><span class="pre">radial_scheme='CHEB'</span></code></a>) is a character string.</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>radial_scheme=’CHEB’</td>
<td>Use Chebyshev polynomials</td>
</tr>
<tr class="row-even"><td>radial_scheme=’FD’</td>
<td>Use finite differences</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>When Chebyshev polynomials are used, it is also possible to use a non-linear
mapping function to concentrate/diperse grid points around a point inside the
domain.</p>
<ul>
<li><p class="first"><strong>l_newmap</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_newmap" title="f/logic/l_newmap"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_newmap=.false.</span></code></a>) is a logical. A radial mapping can be applied to the Chebyshev grid when <code class="docutils literal notranslate"><span class="pre">l_newmap</span></code> is set to <code class="docutils literal notranslate"><span class="pre">.true.</span></code>. The radial profile of the mapping function is then stored during the initialisation of the code in the file <a class="reference internal" href="../outputFiles/outTransportProp.html#secmappingfile"><span class="std std-ref">rNM.TAG</span></a>.</p>
</li>
<li><p class="first"><strong>map_function</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/map_function" title="f/num_param/map_function"><code class="xref f f-var docutils literal notranslate"><span class="pre">map_function='arcsin'</span></code></a>) is a character string. This allows to select which mapping function is used:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>map_function=’TAN’</td>
<td>Use a tangent mapping  (see <a class="reference external" href="https://doi.org/10.1016/0021-9991(92)90012-N">Bayliss and Turkel 1992</a>)</td>
</tr>
<tr class="row-even"><td>map_function=’ARCSIN’</td>
<td>Use finite differences (see <a class="reference external" href="https://doi.org/10.1006/jcph.1993.1044">Kosloff and Tal-Ezer 1993</a>)</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>If the tangent mapping is used, the function that re-distributes the collocation
points is expressed by</p>
<div class="math notranslate nohighlight">
\[r=\frac{1}{2}\left(\alpha_2+\frac{\textrm{tan}\left[\lambda(r_{cheb}-x_0)\right]}{\alpha_1}\right) + \frac{r_i+r_o}{2} \textrm{ ,}\]</div>
<p>where the Gauss-Lobatto collocation points are</p>
<div class="math notranslate nohighlight">
\[r_{cheb}&amp;=\textrm{cos}\left( \frac{\pi(k-1)}{N_r} \right) \textrm{ , }\;\; k=1,2,...,n_r \textrm{ , }\; n_r=n\_r\_max\]</div>
<p>and <span class="math notranslate nohighlight">\(r\!\in\![r_i,r_o]\)</span>, <span class="math notranslate nohighlight">\(r_{cheb}\!\in\![-1.0,1.0]\)</span>. The parameters to calculate <span class="math notranslate nohighlight">\(r\)</span> are</p>
<div class="math notranslate nohighlight">
\[\begin{split}\lambda&amp;=\frac{\textrm{tan}^{-1}\left(\alpha_1(1-\alpha_2)\right)}{1-x_0} \\
x_0&amp;=\frac{K-1}{K+1} \\
K&amp;=\frac{\textrm{tan}^{-1}\left(\alpha_1(1+\alpha_2)\right)}{\textrm{tan}^{-1}\left(\alpha_1(1-\alpha_2)\right)} \textrm{ .}\end{split}\]</div>
<p>The coefficient <span class="math notranslate nohighlight">\(\alpha_1\)</span> determines the degree of concentration/dispersion of the grid points around <span class="math notranslate nohighlight">\(r_{cheb}\!=\!\alpha_2\)</span>. If <span class="math notranslate nohighlight">\(\alpha_1\)</span> is too high, the <span class="math notranslate nohighlight">\(r\)</span> function becomes nearly discontinuous. To avoid numerical problems, <span class="math notranslate nohighlight">\(\alpha_1\)</span> should remain close to unity.</p>
<p>If the arcsin mapping is used, the function that re-distributes the collocation points
is given by</p>
<div class="math notranslate nohighlight">
\[r=\frac{1}{2}\left[ \frac{\textrm{arcin}\left(\alpha_1 r_{cheb}\right)}{\textrm{arcsin} \alpha_1} \right]+\frac{r_i+r_o}{2} \textrm{ ,}\]</div>
<p>In the Kosloff and Tal-Ezer mapping, <span class="math notranslate nohighlight">\(\alpha_1\)</span> transforms the Gauss-Lobatto
grid into a more regularly-spaced grid. When <span class="math notranslate nohighlight">\(\alpha_1 \rightarrow 0\)</span> one
recovers the Gauss-Lobatto grid, while <span class="math notranslate nohighlight">\(\alpha_1 \rightarrow 1\)</span> yields a
regular grid.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The Kosloff-Tal-Ezer mapping becomes singular when <span class="math notranslate nohighlight">\(\alpha_1=1\)</span>.
Acceptable values are <span class="math notranslate nohighlight">\(0&lt;\alpha_1&lt;1\)</span>. Note that the error increases
as <span class="math notranslate nohighlight">\(\epsilon=\left(\frac{1-\sqrt{1-\alpha_1^2}}{\alpha_1}\right)^{N_r}\)</span>.</p>
</div>
<ul class="simple">
<li><strong>alph1</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/alph1" title="f/num_param/alph1"><code class="xref f f-var docutils literal notranslate"><span class="pre">alph1=0.8</span></code></a>) is a real. This is a control parameter of the mapping function.</li>
<li><strong>alph2</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/alph2" title="f/num_param/alph2"><code class="xref f f-var docutils literal notranslate"><span class="pre">alph2=0.0</span></code></a>) is a real. This is a control parameter of the mapping function.</li>
</ul>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><strong>l_non_rot</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_non_rot" title="f/logic/l_non_rot"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_non_rot=.false.</span></code></a>) is a logical. Use it when you want to do non-rotating numerical simulations.</p>
</li>
<li><p class="first"><strong>anelastic_flavour</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/anelastic_flavour" title="f/num_param/anelastic_flavour"><code class="xref f f-var docutils literal notranslate"><span class="pre">anelastic_flavour=&quot;None&quot;</span></code></a>) is a character string. This allows to change the thermal diffusion operator used within the anelastic approximation. Possible values are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>anelastic_flavour=’LBR’</td>
<td>Entropy diffusion</td>
</tr>
<tr class="row-even"><td>anelastic_flavour=’ENT’</td>
<td>Entropy diffusion</td>
</tr>
<tr class="row-odd"><td>anelastic_flavour=’ALA’</td>
<td>Anelastic liquid approximation</td>
</tr>
<tr class="row-even"><td>anelastic_flavour=’TDIFF’</td>
<td>Temperature diffusion</td>
</tr>
<tr class="row-odd"><td>anelastic_flavour=’TEMP’</td>
<td>Temperature diffusion</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>polo_flow_eq</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/polo_flow_eq" title="f/num_param/polo_flow_eq"><code class="xref f f-var docutils literal notranslate"><span class="pre">polo_flow_eq=&quot;WP&quot;</span></code></a>) is a character string. This allows to change how the equation for the poloidal flow potential is constructed. One can either use the radial component of the Navier-Stokes equation and hence keep a coupled system that involve the poloidal potential <span class="math notranslate nohighlight">\(W\)</span> and the pressure <span class="math notranslate nohighlight">\(p\)</span>, or take the radial component of the double-curl of the Navier-Stokes equation to suppress pressure.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>polo_flow_eq=’WP’</td>
<td>Use the pressure formulation</td>
</tr>
<tr class="row-even"><td>polo_flow_eq=’DC’</td>
<td>Use the double-curl formulation</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>mpi_transp</strong> (default <code class="xref f f-var docutils literal notranslate"><span class="pre">mpi_transp=&quot;auto&quot;</span></code>) is a character string. It allows to change the way the global MPI transposes are handled by the code. By default, the code tries to determine by itself the fastest method. One can nevertheless force the code to use local communicators (such as Isend/Irecv/waitall), make use of the native alltoallv MPI variant or choose the alltoallw variant instead.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>mpi_transp=’auto’</td>
<td>Automatic determination of the fastest transpose</td>
</tr>
<tr class="row-even"><td>mpi_transp=’p2p’</td>
<td>Use Isend/Irecv/Waitall communicators</td>
</tr>
<tr class="row-odd"><td>mpi_transp=’a2av’</td>
<td>Use alltoallv communicators</td>
</tr>
<tr class="row-even"><td>mpi_transp=’a2aw’</td>
<td>Use alltoallw communicators</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>mpi_packing</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/num_param/mpi_packing" title="f/num_param/mpi_packing"><code class="xref f f-var docutils literal notranslate"><span class="pre">mpi_packing=&quot;packed&quot;</span></code></a>) is a character string. It allows to change the size of the global MPI transposes. One can choose between some packing of the fields into buffers (default) or a sequence of single field transposes. There is a possible automatic detection but testing unfortunately reveals frequent false detection.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>mpi_packing=’auto’</td>
<td>Automatic determination of the fastest transpose</td>
</tr>
<tr class="row-even"><td>mpi_packing=’packed’</td>
<td>Pack some fields into buffers</td>
</tr>
<tr class="row-odd"><td>mpi_packing=’single’</td>
<td>Transpose each field individually</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>l_adv_curl</strong> (default <a class="reference internal" href="../apiFortran/baseModules.html#f/logic/l_adv_curl" title="f/logic/l_adv_curl"><code class="xref f f-var docutils literal notranslate"><span class="pre">l_adv_curl=.false.</span></code></a>) is a logical. When set to True, the advection term is treated as <span class="math notranslate nohighlight">\(\vec{u}\times\vec{\omega}\)</span> instead of <span class="math notranslate nohighlight">\(\vec{u}\vec{\nabla}\vec{u}\)</span>. The practical consequence of that is to reduce the number of spectral/spatial Spherical Harmonic Transforms and hence to speed-up the code. Because of the treatment of the viscous heating term in the anelastic approximation, this is only an option when considering Boussinesq models.</p>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Control namelist</a><ul>
<li><a class="reference internal" href="#default-scales">Default scales</a></li>
<li><a class="reference internal" href="#update-control">Update control</a></li>
<li><a class="reference internal" href="#time-step-control">Time step control</a></li>
<li><a class="reference internal" href="#run-time">Run time</a></li>
<li><a class="reference internal" href="#hyperdiffusivity">Hyperdiffusivity</a></li>
<li><a class="reference internal" href="#angular-momentum-correction">Angular momentum correction</a></li>
<li><a class="reference internal" href="#radial-scheme-and-mapping-of-the-gauss-lobatto-grid">Radial scheme and mapping of the Gauss-Lobatto grid</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="gridNamelist.html"
                        title="previous chapter">Grid namelist</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="physNamelist.html"
                        title="next chapter">Physical parameters namelist</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/inputNamelists/controlNamelist.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../f-modindex.html" title="Fortran Module Index"
             >fortran modules</a> |</li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="physNamelist.html" title="Physical parameters namelist"
             >next</a> |</li>
        <li class="right" >
          <a href="gridNamelist.html" title="Grid namelist"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">Magic 6.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="namelists.html" >Input parameters</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Thomas Gastine, Johannes Wicht, Ankit Barik, Lùcia Duarte.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>